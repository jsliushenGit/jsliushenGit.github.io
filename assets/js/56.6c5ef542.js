(window.webpackJsonp=window.webpackJsonp||[]).push([[56],{407:function(s,a,t){"use strict";t.r(a);var n=t(16),l=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),t("p",[s._v("策略模式的定义是：定义一系列的算法，把它们一个个封装起来，并且使它们可以互相的替换")])]),s._v(" "),t("h2",{attrs:{id:"案例：年终奖的计算"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#案例：年终奖的计算"}},[s._v("#")]),s._v(" 案例：年终奖的计算")]),s._v(" "),t("p",[s._v("案例一：年终奖的计算\n年终奖是根据员工的工资基数和年底绩效情况来发的，绩效为S的人年终奖有4倍工资，绩效为A的人年终奖有3倍工资，绩效为B的人年终奖有2倍工资。")]),s._v(" "),t("h3",{attrs:{id:"传统实现"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#传统实现"}},[s._v("#")]),s._v(" 传统实现")]),s._v(" "),t("div",{staticClass:"language-JavaScript extra-class"},[t("pre",[t("code",{staticClass:"language-JavaScript"},[t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" calculateBonus = "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" ("),t("span",{staticClass:"hljs-params"},[s._v("performanceLevel, salary")]),s._v(") ")]),s._v("{\n\t"),t("span",{staticClass:"hljs-keyword"},[s._v("if")]),s._v(" (performanceLevel === "),t("span",{staticClass:"hljs-string"},[s._v("'S'")]),s._v(") {\n\t\t"),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" salary * "),t("span",{staticClass:"hljs-number"},[s._v("4")]),s._v("\n\t}\n\t"),t("span",{staticClass:"hljs-keyword"},[s._v("if")]),s._v(" (performanceLevel === "),t("span",{staticClass:"hljs-string"},[s._v("'A'")]),s._v(") {\n\t\t"),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" salary * "),t("span",{staticClass:"hljs-number"},[s._v("3")]),s._v("\n\t}\n\t"),t("span",{staticClass:"hljs-keyword"},[s._v("if")]),s._v(" (performanceLevel === "),t("span",{staticClass:"hljs-string"},[s._v("'B'")]),s._v(") {\n\t\t"),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" salary * "),t("span",{staticClass:"hljs-number"},[s._v("2")]),s._v("\n\t}\n}\n\ncalculateBonus("),t("span",{staticClass:"hljs-string"},[s._v("'B'")]),s._v(", "),t("span",{staticClass:"hljs-number"},[s._v("20000")]),s._v(") "),t("span",{staticClass:"hljs-comment"},[s._v("// 输出40000")]),s._v("\ncalculateBonus("),t("span",{staticClass:"hljs-string"},[s._v("'S'")]),s._v(", "),t("span",{staticClass:"hljs-number"},[s._v("6000")]),s._v(") "),t("span",{staticClass:"hljs-comment"},[s._v("// 输出24000")]),s._v("\n")])])]),t("p",[s._v("上述代码存在三个")]),s._v(" "),t("ul",[t("li",[s._v("calculateBonus 函数比较庞大，包含了很多if-else语句，这个语句需要覆盖所有的逻辑分支。")]),s._v(" "),t("li",[s._v("calculateBonus 函数缺乏弹性，如果增加了一种新的绩效等级C，或者想把绩效S的奖金系数改为5，那么我们必须深入函数内部实现，这违反了开放-封闭原则。")]),s._v(" "),t("li",[s._v("算法的复用性差。如果在程序的其他地方需要重用这些计算奖金的算法，只能复制粘贴。")])]),s._v(" "),t("h3",{attrs:{id:"策略模式重构代码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#策略模式重构代码"}},[s._v("#")]),s._v(" 策略模式重构代码")]),s._v(" "),t("div",{staticClass:"language-JavaScript extra-class"},[t("pre",[t("code",{staticClass:"language-JavaScript"},[t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" performanceS = "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" ("),t("span",{staticClass:"hljs-params"}),s._v(") ")]),s._v("{}\n\nperformanceS.prototype.calculate = "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" ("),t("span",{staticClass:"hljs-params"},[s._v("salary")]),s._v(") ")]),s._v("{\n\t"),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" salary * "),t("span",{staticClass:"hljs-number"},[s._v("4")]),s._v("\n}\n\n"),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" performanceA = "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" ("),t("span",{staticClass:"hljs-params"}),s._v(") ")]),s._v("{}\n\nperformanceA.prototype.calculate = "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" ("),t("span",{staticClass:"hljs-params"},[s._v("salary")]),s._v(") ")]),s._v("{\n\t"),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" salary * "),t("span",{staticClass:"hljs-number"},[s._v("3")]),s._v("\n}\n\n"),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" performanceB = "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" ("),t("span",{staticClass:"hljs-params"}),s._v(") ")]),s._v("{}\n\nperformanceB.prototype.calculate = "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" ("),t("span",{staticClass:"hljs-params"},[s._v("salary")]),s._v(") ")]),s._v("{\n\t"),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" salary * "),t("span",{staticClass:"hljs-number"},[s._v("2")]),s._v("\n}\n\n"),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" Bonus = "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" ("),t("span",{staticClass:"hljs-params"}),s._v(") ")]),s._v("{\n\t"),t("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v(".salary = "),t("span",{staticClass:"hljs-literal"},[s._v("null")]),s._v("\n\t"),t("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v(".strategy = "),t("span",{staticClass:"hljs-literal"},[s._v("null")]),s._v("\n}\n\nBonus.prototype.setSalary = "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" ("),t("span",{staticClass:"hljs-params"},[s._v("salary")]),s._v(") ")]),s._v("{\n\t"),t("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v(".salary = salary\n}\n\nBonus.prototype.setStrategy = "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" ("),t("span",{staticClass:"hljs-params"},[s._v("strategy")]),s._v(") ")]),s._v("{\n\t"),t("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v(".strategy = strategy\n}\n\nBonus.prototype.getBonus = "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" ("),t("span",{staticClass:"hljs-params"}),s._v(") ")]),s._v("{\n\t"),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v(".strategy.calculate("),t("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v(".salary)\n}\n\n"),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" bonus = "),t("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" Bonus()\n\nbonus.setSalary("),t("span",{staticClass:"hljs-number"},[s._v("10000")]),s._v(")\n\nbonus.setStrategy("),t("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" performanceS()) "),t("span",{staticClass:"hljs-comment"},[s._v("// 设置策略对象")]),s._v("\n"),t("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log(bonus.getBonus()) "),t("span",{staticClass:"hljs-comment"},[s._v("// 输出40000")]),s._v("\n\nbonus.setStrategy("),t("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" performanceA()) "),t("span",{staticClass:"hljs-comment"},[s._v("// 设置策略对象")]),s._v("\n"),t("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log(bonus.getBonus()) "),t("span",{staticClass:"hljs-comment"},[s._v("// 输出30000")]),s._v("\n")])])]),t("p",[s._v("上述代码经过策略模式重构之后，代码变得更加清晰，各个类的职责更加鲜明。但是这段代码是基于传统面向对象语言的模仿，非常冗余。")]),s._v(" "),t("h2",{attrs:{id:"javascript版本的策略模式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#javascript版本的策略模式"}},[s._v("#")]),s._v(" JavaScript版本的策略模式")]),s._v(" "),t("p",[s._v("在JavaScript中，函数也是对象。上述计算年终奖的例子，更简单和直接的做法是把strategy直接定义为函数。")]),s._v(" "),t("div",{staticClass:"language-JavaScript extra-class"},[t("pre",[t("code",{staticClass:"language-JavaScript"},[t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" strategies = {\n  "),t("span",{staticClass:"hljs-attr"},[s._v("S")]),s._v(": "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" ("),t("span",{staticClass:"hljs-params"},[s._v("salary")]),s._v(")")]),s._v("{\n    "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" salary * "),t("span",{staticClass:"hljs-number"},[s._v("4")]),s._v("\n  },\n  "),t("span",{staticClass:"hljs-attr"},[s._v("A")]),s._v(": "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v("("),t("span",{staticClass:"hljs-params"},[s._v("salary")]),s._v(") ")]),s._v("{\n    "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" salary * "),t("span",{staticClass:"hljs-number"},[s._v("3")]),s._v("\n  },\n  "),t("span",{staticClass:"hljs-attr"},[s._v("B")]),s._v(": "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" ("),t("span",{staticClass:"hljs-params"}),s._v(") ")]),s._v("{\n    "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" salary * "),t("span",{staticClass:"hljs-number"},[s._v("2")]),s._v("\n  }\n}\n\n"),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" calculateBonus = "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" ("),t("span",{staticClass:"hljs-params"},[s._v("strategy, salary")]),s._v(") ")]),s._v("{\n  "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" strategies[strategy](salary);\n}\n\n"),t("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log(calculateBonus("),t("span",{staticClass:"hljs-string"},[s._v('"S"')]),s._v(","),t("span",{staticClass:"hljs-number"},[s._v("4000")]),s._v("));\n"),t("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log(calculateBonus("),t("span",{staticClass:"hljs-string"},[s._v('"A"')]),s._v(","),t("span",{staticClass:"hljs-number"},[s._v("2000")]),s._v("));\n")])])]),t("h2",{attrs:{id:"更广义的-算法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#更广义的-算法"}},[s._v("#")]),s._v(" 更广义的“算法”")]),s._v(" "),t("p",[s._v("从定义上看，策略模式就是用来封装算法的。但实际开发中，我们也可以用策略模式来封装一系列的“业务规则”。只要这些业务规则指向的目标一致，并且可以被替换使用，我们就可以用策略模式来封装它们。")]),s._v(" "),t("h2",{attrs:{id:"案例：表单校验"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#案例：表单校验"}},[s._v("#")]),s._v(" 案例：表单校验")]),s._v(" "),t("p",[s._v("假设我们正在编写一个注册页面，在点击注册按钮之前，有如下几条校验逻辑")]),s._v(" "),t("ul",[t("li",[s._v("用户名不能为空")]),s._v(" "),t("li",[s._v("密码长度不能少于6位")]),s._v(" "),t("li",[s._v("手机号码必须符合格式")])]),s._v(" "),t("h3",{attrs:{id:"不使用策略模式的版本"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#不使用策略模式的版本"}},[s._v("#")]),s._v(" 不使用策略模式的版本")]),s._v(" "),t("div",{staticClass:"language-JavaScript extra-class"},[t("pre",[t("code",{staticClass:"language-JavaScript"},[t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" registerForm = "),t("span",{staticClass:"hljs-built_in"},[s._v("document")]),s._v(".getElementById("),t("span",{staticClass:"hljs-string"},[s._v("'registerForm'")]),s._v(");\n\nregisterForm.onsubmit = "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" ("),t("span",{staticClass:"hljs-params"}),s._v(") ")]),s._v("{\n  "),t("span",{staticClass:"hljs-keyword"},[s._v("if")]),s._v(" (registerForm.userName.value === "),t("span",{staticClass:"hljs-string"},[s._v("''")]),s._v("){\n    alert("),t("span",{staticClass:"hljs-string"},[s._v("'用户名不能为空'")]),s._v(");\n    "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),t("span",{staticClass:"hljs-literal"},[s._v("false")]),s._v("; \n  }\n  "),t("span",{staticClass:"hljs-keyword"},[s._v("if")]),s._v(" (registerForm.password.value.length < "),t("span",{staticClass:"hljs-number"},[s._v("6")]),s._v(") { \n    alert ("),t("span",{staticClass:"hljs-string"},[s._v("'密码长度不能少于6位'")]),s._v(");\n    "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),t("span",{staticClass:"hljs-literal"},[s._v("false")]),s._v(";\n  }\n  "),t("span",{staticClass:"hljs-keyword"},[s._v("if")]),s._v(" (!"),t("span",{staticClass:"hljs-regexp"},[s._v("/(^1[3|5|8][0-9]{9}$)/")]),s._v(".test(registerForm.phoneNumber.value)) {\n    alert ( "),t("span",{staticClass:"hljs-string"},[s._v("'手机号码格式不正确'")]),s._v(" ); \n    "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),t("span",{staticClass:"hljs-literal"},[s._v("false")]),s._v(";\n  }\n}\n")])])]),t("h3",{attrs:{id:"使用策略模式重构的版本"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用策略模式重构的版本"}},[s._v("#")]),s._v(" 使用策略模式重构的版本")]),s._v(" "),t("div",{staticClass:"language-JavaScript extra-class"},[t("pre",[t("code",{staticClass:"language-JavaScript"},[t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" strategies = {\n  "),t("span",{staticClass:"hljs-attr"},[s._v("isNonEmpty")]),s._v(": "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" ("),t("span",{staticClass:"hljs-params"},[s._v("value, errorMsg")]),s._v(") ")]),s._v("{\n    "),t("span",{staticClass:"hljs-keyword"},[s._v("if")]),s._v(" (value === "),t("span",{staticClass:"hljs-string"},[s._v("''")]),s._v("){ \n      "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" errorMsg ;\n    } \n\t},\n\t\n  "),t("span",{staticClass:"hljs-attr"},[s._v("minLength")]),s._v(": "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" ("),t("span",{staticClass:"hljs-params"},[s._v("value, length, errorMsg")]),s._v(") ")]),s._v("{ \n    "),t("span",{staticClass:"hljs-keyword"},[s._v("if")]),s._v(" (value.length < length) {\n      "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" errorMsg;\n    }\n\t},\n\t\n  "),t("span",{staticClass:"hljs-attr"},[s._v("isMobile")]),s._v(": "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v("("),t("span",{staticClass:"hljs-params"},[s._v("value, errorMsg")]),s._v(") ")]),s._v("{ "),t("span",{staticClass:"hljs-comment"},[s._v("// 手机号码格式")]),s._v("\n    "),t("span",{staticClass:"hljs-keyword"},[s._v("if")]),s._v(" (!"),t("span",{staticClass:"hljs-regexp"},[s._v("/(^1[3|5|8][0-9]{9}$)/")]),s._v(".test(value)) { \n      "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" errorMsg;\n    } \n  }\n};\n\n"),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" Validator = "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v("("),t("span",{staticClass:"hljs-params"}),s._v(")")]),s._v("{\n  "),t("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v(".cache = []; "),t("span",{staticClass:"hljs-comment"},[s._v("// 保存校验规则")]),s._v("\n};\n\nValidator.prototype.add = "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" ("),t("span",{staticClass:"hljs-params"},[s._v("dom, rule, errorMsg")]),s._v(") ")]),s._v("{ \n  "),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" ary = rule.split("),t("span",{staticClass:"hljs-string"},[s._v("':'")]),s._v("); \n  "),t("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v(".cache.push("),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v("("),t("span",{staticClass:"hljs-params"}),s._v(")")]),s._v("{ "),t("span",{staticClass:"hljs-comment"},[s._v("//")]),s._v("\n    "),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" strategy = ary.shift(); \n    ary.unshift(dom.value); \n    ary.push(errorMsg); "),t("span",{staticClass:"hljs-comment"},[s._v("// ")]),s._v("\n    "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" strategies[strategy].apply(dom, ary);\n  }); \n};\n\nValidator.prototype.start = "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" ("),t("span",{staticClass:"hljs-params"}),s._v(") ")]),s._v("{\n  "),t("span",{staticClass:"hljs-keyword"},[s._v("for")]),s._v("("),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" i = "),t("span",{staticClass:"hljs-number"},[s._v("0")]),s._v(", validatorFunc; validatorFunc = "),t("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v(".cache[i++];){\n    "),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" msg = validatorFunc(); "),t("span",{staticClass:"hljs-comment"},[s._v("// 开始校验，并取得校验后的返回信息 ")]),s._v("\n    "),t("span",{staticClass:"hljs-keyword"},[s._v("if")]),s._v(" (msg){ "),t("span",{staticClass:"hljs-comment"},[s._v("// 如果有确切的返回值，说明校验没有通过")]),s._v("\n      "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" msg; \n    }\n  }\n};\n\n"),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" validataFunc = "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" ("),t("span",{staticClass:"hljs-params"}),s._v(") ")]),s._v("{\n  "),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" validator = "),t("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" Validator(); "),t("span",{staticClass:"hljs-comment"},[s._v("// 创建一个 validator 对象")]),s._v("\n  "),t("span",{staticClass:"hljs-comment"},[s._v("/***************添加一些校验规则****************/")]),s._v("\n  validator.add(registerForm.userName, "),t("span",{staticClass:"hljs-string"},[s._v("'isNonEmpty'")]),s._v(", "),t("span",{staticClass:"hljs-string"},[s._v("'用户名不能为空'")]),s._v(");           \n  validator.add(registerForm.password, "),t("span",{staticClass:"hljs-string"},[s._v("'minLength:6'")]),s._v(", "),t("span",{staticClass:"hljs-string"},[s._v("'密码长度不能少于6位'")]),s._v(");     \n  validator.add(registerForm.phoneNumber, "),t("span",{staticClass:"hljs-string"},[s._v("'isMobile'")]),s._v(", "),t("span",{staticClass:"hljs-string"},[s._v("'手机号码格式不正确'")]),s._v(");\n  "),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" errorMsg = validator.start(); "),t("span",{staticClass:"hljs-comment"},[s._v("// 获得校验结果")]),s._v("\n  "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" errorMsg; "),t("span",{staticClass:"hljs-comment"},[s._v("// 返回校验结果 ")]),s._v("\n}\n\n"),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" registerForm = "),t("span",{staticClass:"hljs-built_in"},[s._v("document")]),s._v(".getElementById("),t("span",{staticClass:"hljs-string"},[s._v("'registerForm'")]),s._v("); \nregisterForm.onsubmit = "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" ("),t("span",{staticClass:"hljs-params"}),s._v(") ")]),s._v("{\n  "),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" errorMsg = validataFunc(); "),t("span",{staticClass:"hljs-comment"},[s._v("// 如果 errorMsg 有确切的返回值，说明未通过校验 ")]),s._v("\n  "),t("span",{staticClass:"hljs-keyword"},[s._v("if")]),s._v(" (errorMsg){\n    alert (errorMsg);\n    "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),t("span",{staticClass:"hljs-literal"},[s._v("false")]),s._v("; "),t("span",{staticClass:"hljs-comment"},[s._v("// 阻止表单提交 ")]),s._v("\n  }\n};\n")])])]),t("h2",{attrs:{id:"策略模式的优缺点"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#策略模式的优缺点"}},[s._v("#")]),s._v(" 策略模式的优缺点")]),s._v(" "),t("p",[s._v("策略模式的优点：")]),s._v(" "),t("ul",[t("li",[s._v("策略模式利用组合、委托和多态等技术思想，可以有效的避免多重条件选择语句")]),s._v(" "),t("li",[s._v("策略模式提供了对开放-封闭原则的完美支持，将算法封装在独立的strategy中，使得它们易于切换，易于理解，易于扩展")]),s._v(" "),t("li",[s._v("策略模式中的算法也可以复用在系统的其他地方，从而避免许多重复的复制粘贴工作。")]),s._v(" "),t("li",[s._v("在策略模式中利用组合和委托来让Context拥有执行算法的能力，这也是继承的一种更轻便的替代方案")])]),s._v(" "),t("p",[s._v("策略模式的缺点")]),s._v(" "),t("ul",[t("li",[s._v("使用策略模式会在程序中增加许多策略类或者策略对象")]),s._v(" "),t("li",[s._v("使用策略模式时，所有的strategy要向客户暴露它的所有实现，违反最少知识原则")])]),s._v(" "),t("h2",{attrs:{id:"小结"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#小结"}},[s._v("#")]),s._v(" 小结")]),s._v(" "),t("p",[s._v("在JavaScript的策略模式中，策略类往往被函数所代替，这时策略模式就成为一种“隐形”的模式。")]),s._v(" "),t("h2",{attrs:{id:"心得体会"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#心得体会"}},[s._v("#")]),s._v(" 心得体会")]),s._v(" "),t("p",[s._v("利用策略模式来减少if语句，装逼神器啊。😂😂😂😂😂😂")])])}),[],!1,null,null,null);a.default=l.exports}}]);