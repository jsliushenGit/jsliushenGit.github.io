(window.webpackJsonp=window.webpackJsonp||[]).push([[53],{411:function(s,a,t){"use strict";t.r(a);var n=t(16),l=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),t("p",[s._v("命令模式中的命令指的是一个执行某些特定事情的指令。")])]),s._v(" "),t("h2",{attrs:{id:"javascript中的命令模式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#javascript中的命令模式"}},[s._v("#")]),s._v(" JavaScript中的命令模式")]),s._v(" "),t("p",[s._v("命令模式的由来，其实是回调函数的一个面向对象的替代品。和策略模式一样，命令模式也早已融入到了JavaScript语言中。")]),s._v(" "),t("p",[s._v("案例：菜单程序\n假设我们正在编写一个用户界面程序，该用户界面上至少有数十个Button按钮。因为项目比价复杂，所以我们决定让某个程序员负责绘制这些按钮，而另外一些程序员则负责编写点击按钮后的具体行为，这些行为都将被封装在对象里。")]),s._v(" "),t("div",{staticClass:"language-JavaScript extra-class"},[t("pre",[t("code",{staticClass:"language-JavaScript"},[t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" RefreshMenuBarCommand = "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" ("),t("span",{staticClass:"hljs-params"},[s._v("receiver")]),s._v(") ")]),s._v("{\n  "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" {\n    "),t("span",{staticClass:"hljs-attr"},[s._v("execute")]),s._v(": "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" ("),t("span",{staticClass:"hljs-params"}),s._v(") ")]),s._v("{\n      receiver.refresh()\n    }\n  }\n}\n\n"),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" setCommand = "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" ("),t("span",{staticClass:"hljs-params"},[s._v("button, command")]),s._v(") ")]),s._v("{\n  button.onclick = "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" ("),t("span",{staticClass:"hljs-params"}),s._v(") ")]),s._v("{\n    command.execute()\n  }\n}\n\n"),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" MenuBar = {\n  "),t("span",{staticClass:"hljs-attr"},[s._v("refresh")]),s._v(": "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" ("),t("span",{staticClass:"hljs-params"}),s._v(") ")]),s._v("{\n    "),t("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log("),t("span",{staticClass:"hljs-string"},[s._v("'刷新菜单界面'")]),s._v(")\n  }\n}\n\n"),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" refreshMenuBarCommand = RefreshMenuBarCommand(MenuBar)\n\nsetCommand(button1, refreshMenuBarCommand)\n")])])]),t("h2",{attrs:{id:"撤销和重做"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#撤销和重做"}},[s._v("#")]),s._v(" 撤销和重做")]),s._v(" "),t("p",[s._v("当需要撤销命令时，我们可以把所有执行过的命令都存储在一个历史列表中，然后倒序循环来依次执行这些命令的undo操作。"),t("br"),s._v("\n如果要撤销不可逆转的命令，我们可以记录命令日志，然后清楚搜索操作，把刚才执行过的命令全部重新执行一遍。")]),s._v(" "),t("div",{staticClass:"language-JavaScript extra-class"},[t("pre",[t("code",{staticClass:"language-JavaScript"},[t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" Ryu = {\n  attack () {\n    "),t("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log("),t("span",{staticClass:"hljs-string"},[s._v('"攻击"')]),s._v(");\n\t},\n\t\n  defense () {\n    "),t("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log("),t("span",{staticClass:"hljs-string"},[s._v('"防御"')]),s._v(");\n  },\n\t\t\t\t\t\t\n\tjump () {\n    "),t("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log("),t("span",{staticClass:"hljs-string"},[s._v('"跳跃"')]),s._v(");\n  },\n\t\t\t\t\t\t\n\tcrouch () {\n    "),t("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log("),t("span",{staticClass:"hljs-string"},[s._v('"蹲下"')]),s._v(")\n  }\n}\n\t\t\t\t\n"),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" makeCommand = "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" ("),t("span",{staticClass:"hljs-params"},[s._v("receiver, state")]),s._v(") ")]),s._v("{\n  "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" ("),t("span",{staticClass:"hljs-params"}),s._v(") ")]),s._v("{\n    "),t("span",{staticClass:"hljs-keyword"},[s._v("if")]),s._v(" (receiver[state]) {\n      receiver[state]();\n    }\n\t}\n}\n\t\t\t\t\n"),t("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" commands = {\n  "),t("span",{staticClass:"hljs-string"},[s._v('"119"')]),s._v(": "),t("span",{staticClass:"hljs-string"},[s._v('"jump"')]),s._v(",\n  "),t("span",{staticClass:"hljs-string"},[s._v('"115"')]),s._v(": "),t("span",{staticClass:"hljs-string"},[s._v('"crouch"')]),s._v(",\n  "),t("span",{staticClass:"hljs-string"},[s._v('"97"')]),s._v(": "),t("span",{staticClass:"hljs-string"},[s._v('"defense"')]),s._v(",\n  "),t("span",{staticClass:"hljs-string"},[s._v('"100"')]),s._v(": "),t("span",{staticClass:"hljs-string"},[s._v('"attack"')]),s._v("\n}\n\t\t\t\t\n"),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" commandStack = [];\n\n"),t("span",{staticClass:"hljs-built_in"},[s._v("document")]),s._v(".onkeypress = "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" ("),t("span",{staticClass:"hljs-params"},[s._v("ev")]),s._v(") ")]),s._v("{\n  "),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" keyCode = ev.keyCode,\n    command = makeCommand(Ryu, commands[keyCode]);\n  "),t("span",{staticClass:"hljs-keyword"},[s._v("if")]),s._v(" (command) {\n    commandStack.push(command);\n  }\n}\n\t\n"),t("span",{staticClass:"hljs-built_in"},[s._v("document")]),s._v(".getElementById("),t("span",{staticClass:"hljs-string"},[s._v('"replay"')]),s._v(").onclick = "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" ("),t("span",{staticClass:"hljs-params"}),s._v(") ")]),s._v("{\n  "),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" command;\n  "),t("span",{staticClass:"hljs-keyword"},[s._v("while")]),s._v(" (command = commandStack.shift()) {\n    command();\n  }\n}\n")])])]),t("h2",{attrs:{id:"宏命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#宏命令"}},[s._v("#")]),s._v(" 宏命令")]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),t("p",[s._v("宏命令是一组命令的集合，通过执行宏命令的方式，可以一次执行一批命令。")])]),s._v(" "),t("div",{staticClass:"language-JavaScript extra-class"},[t("pre",[t("code",{staticClass:"language-JavaScript"},[t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" closeDoorCommand = {\n  "),t("span",{staticClass:"hljs-attr"},[s._v("excute")]),s._v(": "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" ("),t("span",{staticClass:"hljs-params"}),s._v(") ")]),s._v("{\n    "),t("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log("),t("span",{staticClass:"hljs-string"},[s._v('"关门"')]),s._v(");\n  }\n}\n\t\t\t\t\n"),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" openPcCommand = {\n  "),t("span",{staticClass:"hljs-attr"},[s._v("excute")]),s._v(": "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" ("),t("span",{staticClass:"hljs-params"}),s._v(") ")]),s._v("{\n    "),t("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log("),t("span",{staticClass:"hljs-string"},[s._v('"开电脑"')]),s._v(");\n  }\n}\n\n"),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" openQQCommand = {\n  "),t("span",{staticClass:"hljs-attr"},[s._v("excute")]),s._v(": "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" ("),t("span",{staticClass:"hljs-params"}),s._v(") ")]),s._v("{\n    "),t("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log("),t("span",{staticClass:"hljs-string"},[s._v('"登陆qq"')]),s._v(")\n\t}\n}\n\t\t\t\t\n"),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" macroCommand = ("),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" ("),t("span",{staticClass:"hljs-params"}),s._v(") ")]),s._v("{\n  "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" {\n\t\t"),t("span",{staticClass:"hljs-attr"},[s._v("commandList")]),s._v(": [],\n\t\t\n    "),t("span",{staticClass:"hljs-attr"},[s._v("add")]),s._v(": "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" ("),t("span",{staticClass:"hljs-params"},[s._v("command")]),s._v(") ")]),s._v("{\n      "),t("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v(".commandList.push(command);\n\t\t},\n\t\t\n    "),t("span",{staticClass:"hljs-attr"},[s._v("excute")]),s._v(": "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" ("),t("span",{staticClass:"hljs-params"}),s._v(") ")]),s._v("{\n      "),t("span",{staticClass:"hljs-keyword"},[s._v("for")]),s._v(" ("),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" i = "),t("span",{staticClass:"hljs-number"},[s._v("0")]),s._v(", command; command = "),t("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v(".commandList[i++];) {\n        command.excute();\n    \t}\n\t\t}\n  }\n})()\n\nmacroCommand.add(closeDoorCommand);\nmacroCommand.add(openPcCommand);\nmacroCommand.add(openQQCommand);\nmacroCommand.excute();\n")])])])])}),[],!1,null,null,null);a.default=l.exports}}]);