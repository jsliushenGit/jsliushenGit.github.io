(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{415:function(s,a,t){"use strict";t.r(a);var l=t(16),n=Object(l.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("说明")]),s._v(" "),t("p",[s._v("JavaScript 的 this 总是指向一个对象，而具体指向哪个对象是在运行时基于函数的执行环境动态绑定的，而非函数被声明时的环境")])]),s._v(" "),t("p",[s._v("this的指向基本可以分成以下四种情况")]),s._v(" "),t("ul",[t("li",[s._v("作为对象的方法调用")]),s._v(" "),t("li",[s._v("作为普通函数调用")]),s._v(" "),t("li",[s._v("构造器调用")]),s._v(" "),t("li",[s._v("Function.prototype.call 或 Function.prototype.apply 调用")])]),s._v(" "),t("h2",{attrs:{id:"作为对象的方法调用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#作为对象的方法调用"}},[s._v("#")]),s._v(" 作为对象的方法调用")]),s._v(" "),t("p",[s._v("当函数作为对象的方法被调用时，this 指向该对象")]),s._v(" "),t("div",{staticClass:"language-javascript extra-class"},[t("pre",[t("code",{staticClass:"language-javascript"},[t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" obj = { \n  "),t("span",{staticClass:"hljs-attr"},[s._v("a")]),s._v(": "),t("span",{staticClass:"hljs-number"},[s._v("1")]),s._v(",\n  "),t("span",{staticClass:"hljs-attr"},[s._v("getA")]),s._v(": "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v("("),t("span",{staticClass:"hljs-params"}),s._v(")")]),s._v("{\n    alert ("),t("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v(" === obj); "),t("span",{staticClass:"hljs-comment"},[s._v("// 输出:true alert ( this.a ); // 输出: 1")]),s._v("\n  }\n};\n\nobj.getA();\n")])])]),t("h2",{attrs:{id:"作为普通函数调用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#作为普通函数调用"}},[s._v("#")]),s._v(" 作为普通函数调用")]),s._v(" "),t("p",[s._v("当函数不作为对象的属性被调用时，也就是我们常说的普通函数方式,此时的 this 总是指向全局对象。在浏览器的 JavaScript 里，这个全局对象是 window 对象。")]),s._v(" "),t("div",{staticClass:"language-javascript extra-class"},[t("pre",[t("code",{staticClass:"language-javascript"},[t("span",{staticClass:"hljs-built_in"},[s._v("window")]),s._v(".name = "),t("span",{staticClass:"hljs-string"},[s._v("'globalName'")]),s._v(";\n"),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" myObject = { \n  "),t("span",{staticClass:"hljs-attr"},[s._v("name")]),s._v(": "),t("span",{staticClass:"hljs-string"},[s._v("'sven'")]),s._v(",\n  "),t("span",{staticClass:"hljs-attr"},[s._v("getName")]),s._v(": "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v("("),t("span",{staticClass:"hljs-params"}),s._v(")")]),s._v("{ \n    "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v(".name;\n  } \n};\n"),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" getName = myObject.getName; \n"),t("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log(getName()); "),t("span",{staticClass:"hljs-comment"},[s._v("// globalName")]),s._v("\n")])])]),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[s._v("WARNING")]),s._v(" "),t("p",[s._v("在ECMAScript5的严格模式下，作为普通函数调用时，此时的this指向undefined")])]),s._v(" "),t("h2",{attrs:{id:"构造器调用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#构造器调用"}},[s._v("#")]),s._v(" 构造器调用")]),s._v(" "),t("p",[s._v("当用 new 运算符调用函数时，该函数总 会返回一个对象，通常情况下，构造器里的 this 就指向返回的这个对象")]),s._v(" "),t("div",{staticClass:"language-javascript extra-class"},[t("pre",[t("code",{staticClass:"language-javascript"},[t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" MyClass = "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v("("),t("span",{staticClass:"hljs-params"}),s._v(")")]),s._v("{ \n  "),t("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v(".name = "),t("span",{staticClass:"hljs-string"},[s._v("'sven'")]),s._v(";\n};\n"),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" obj = "),t("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" MyClass();\nalert(obj.name);    "),t("span",{staticClass:"hljs-comment"},[s._v("// 输出:sven")]),s._v("\n")])])]),t("p",[s._v("如果构造器显式地返回了一个 object 类型的对象，那么此次运算结果最终会返回这个对象，而不是我们之前期待的 this")]),s._v(" "),t("div",{staticClass:"language-javascript extra-class"},[t("pre",[t("code",{staticClass:"language-javascript"},[t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" MyClass = "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v("("),t("span",{staticClass:"hljs-params"}),s._v(")")]),s._v("{\n  "),t("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v(".name = "),t("span",{staticClass:"hljs-string"},[s._v("'sven'")]),s._v(";\n  "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" { "),t("span",{staticClass:"hljs-comment"},[s._v("// 显式地返回一个对象")]),s._v("\n    "),t("span",{staticClass:"hljs-attr"},[s._v("name")]),s._v(": "),t("span",{staticClass:"hljs-string"},[s._v("'anne'")]),s._v(" \n  }\n};\n"),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" obj = "),t("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" MyClass();\nalert(obj.name); "),t("span",{staticClass:"hljs-comment"},[s._v("// 输出:anne")]),s._v("\n")])])]),t("h2",{attrs:{id:"call和apply调用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#call和apply调用"}},[s._v("#")]),s._v(" call和apply调用")]),s._v(" "),t("p",[s._v("跟普通的函数调用相比，用 Function.prototype.call 或 Function.prototype.apply 可以动态地 改变传入函数的 this")]),s._v(" "),t("div",{staticClass:"language-javascript extra-class"},[t("pre",[t("code",{staticClass:"language-javascript"},[t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" obj1 = { \n  "),t("span",{staticClass:"hljs-attr"},[s._v("name")]),s._v(": "),t("span",{staticClass:"hljs-string"},[s._v("'sven'")]),s._v(",\n  "),t("span",{staticClass:"hljs-attr"},[s._v("getName")]),s._v(": "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v("("),t("span",{staticClass:"hljs-params"}),s._v(")")]),s._v("{\n    "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v(".name;\n  } \n};\n"),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" obj2 = { \n  "),t("span",{staticClass:"hljs-attr"},[s._v("name")]),s._v(": "),t("span",{staticClass:"hljs-string"},[s._v("'anne'")]),s._v("\n};\n"),t("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log( obj1.getName() );"),t("span",{staticClass:"hljs-comment"},[s._v("// 输出: sven")]),s._v("\n"),t("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log( obj1.getName.call( obj2 ) ); "),t("span",{staticClass:"hljs-comment"},[s._v("// 输出:anne")]),s._v("\n")])])]),t("h3",{attrs:{id:"call和apply的区别"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#call和apply的区别"}},[s._v("#")]),s._v(" call和apply的区别")]),s._v(" "),t("p",[s._v("Function.prototype.call 和 Function.prototype.apply 都是非常常用的方法。它们的作用一模一样，区别仅在于传入参数形式的不同")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("方法")]),s._v(" "),t("th",{staticStyle:{"text-align":"center"}},[s._v("第一个参数")]),s._v(" "),t("th",{staticStyle:{"text-align":"right"}},[s._v("第二个参数")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("apply")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("函数体内this对象的指向")]),s._v(" "),t("td",{staticStyle:{"text-align":"right"}},[s._v("带下标的集合")])]),s._v(" "),t("tr",[t("td",[s._v("call")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("函数体内this对象的指向")]),s._v(" "),t("td",{staticStyle:{"text-align":"right"}},[s._v("从第二个参数开始，每个参数被依次传入函数")])])])]),s._v(" "),t("p",[s._v("apply")]),s._v(" "),t("div",{staticClass:"language-javascript extra-class"},[t("pre",[t("code",{staticClass:"language-javascript"},[t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" func = "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v("("),t("span",{staticClass:"hljs-params"},[s._v("a, b, c")]),s._v(")")]),s._v("{\n  alert ([a, b, c]); "),t("span",{staticClass:"hljs-comment"},[s._v("// 输出 [1, 2, 3]")]),s._v("\n};\nfunc.apply("),t("span",{staticClass:"hljs-literal"},[s._v("null")]),s._v(", ["),t("span",{staticClass:"hljs-number"},[s._v("1")]),s._v(", "),t("span",{staticClass:"hljs-number"},[s._v("2")]),s._v(", "),t("span",{staticClass:"hljs-number"},[s._v("3")]),s._v("]);\n")])])]),t("p",[s._v("call")]),s._v(" "),t("div",{staticClass:"language-javascript extra-class"},[t("pre",[t("code",{staticClass:"language-javascript"},[t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" func = "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v("("),t("span",{staticClass:"hljs-params"},[s._v(" a, b, c ")]),s._v(")")]),s._v("{\n  alert([a, b, c]); "),t("span",{staticClass:"hljs-comment"},[s._v("// 输出 [ 1, 2, 3 ]")]),s._v("\n};\nfunc.call("),t("span",{staticClass:"hljs-literal"},[s._v("null")]),s._v(", "),t("span",{staticClass:"hljs-number"},[s._v("1")]),s._v(", "),t("span",{staticClass:"hljs-number"},[s._v("2")]),s._v(", "),t("span",{staticClass:"hljs-number"},[s._v("3")]),s._v(" );\n")])])]),t("h3",{attrs:{id:"call和apply的用途"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#call和apply的用途"}},[s._v("#")]),s._v(" call和apply的用途")]),s._v(" "),t("ul",[t("li",[s._v("改变 this 指向")]),s._v(" "),t("li",[s._v("借用其他对象的方法")])]),s._v(" "),t("p",[s._v("改变 this 指向")]),s._v(" "),t("div",{staticClass:"language-javascript extra-class"},[t("pre",[t("code",{staticClass:"language-javascript"},[t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" obj1 = { \n  "),t("span",{staticClass:"hljs-attr"},[s._v("name")]),s._v(": "),t("span",{staticClass:"hljs-string"},[s._v("'sven'")]),s._v("\n};\n"),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" obj2 = { \n  "),t("span",{staticClass:"hljs-attr"},[s._v("name")]),s._v(": "),t("span",{staticClass:"hljs-string"},[s._v("'anne'")]),s._v("\n};\n"),t("span",{staticClass:"hljs-built_in"},[s._v("window")]),s._v(".name = "),t("span",{staticClass:"hljs-string"},[s._v("'window'")]),s._v(";\n"),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" getName = "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" ("),t("span",{staticClass:"hljs-params"}),s._v(") ")]),s._v("{ \n  alert ("),t("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v(".name);\n};\ngetName();     "),t("span",{staticClass:"hljs-comment"},[s._v("// 输出：window")]),s._v("\ngetName.call(obj1); "),t("span",{staticClass:"hljs-comment"},[s._v("// 输出: sven")]),s._v("\ngetName.call(obj2); "),t("span",{staticClass:"hljs-comment"},[s._v("// 输出: anne")]),s._v("\n")])])]),t("p",[s._v("借用其他对象的方法")]),s._v(" "),t("div",{staticClass:"language-javascript extra-class"},[t("pre",[t("code",{staticClass:"language-javascript"},[s._v("("),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v("("),t("span",{staticClass:"hljs-params"}),s._v(")")]),s._v("{\n  "),t("span",{staticClass:"hljs-built_in"},[s._v("Array")]),s._v(".prototype.push.call("),t("span",{staticClass:"hljs-built_in"},[s._v("arguments")]),s._v(", "),t("span",{staticClass:"hljs-number"},[s._v("3")]),s._v("); \n  "),t("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log("),t("span",{staticClass:"hljs-built_in"},[s._v("arguments")]),s._v("); "),t("span",{staticClass:"hljs-comment"},[s._v("// 输出[1,2,3]")]),s._v("\n})("),t("span",{staticClass:"hljs-number"},[s._v("1")]),s._v(", "),t("span",{staticClass:"hljs-number"},[s._v("2")]),s._v(");\n")])])])])}),[],!1,null,null,null);a.default=n.exports}}]);