(window.webpackJsonp=window.webpackJsonp||[]).push([[63],{326:function(s,a,t){"use strict";t.r(a);var n=t(16),l=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),t("p",[s._v("闭包的形成与变量的作用域以及变量以及变量的生存周期密切相关。")])]),s._v(" "),t("h2",{attrs:{id:"变量的作用域"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#变量的作用域"}},[s._v("#")]),s._v(" 变量的作用域")]),s._v(" "),t("p",[s._v("变量的作用域，就是指变量的有效范围。\n当在函数中声明一个变量时，如果该变量前面没有带上关键字"),t("code",[s._v("var")]),s._v("，这个变量就会成为全局变量。"),t("br"),s._v("\n用 "),t("code",[s._v("var")]),s._v(" 关键字在函数中声明变量，这时候的变量即是局部变量，只有在该函数内部才能访问到这个变量，在函数外面是访问不到的")]),s._v(" "),t("div",{staticClass:"language-javascript extra-class"},[t("pre",[t("code",{staticClass:"language-javascript"},[t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" func = "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v("("),t("span",{staticClass:"hljs-params"}),s._v(")")]),s._v("{ \n  "),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" a = "),t("span",{staticClass:"hljs-number"},[s._v("1")]),s._v(";\n  alert(a); "),t("span",{staticClass:"hljs-comment"},[s._v("// 输出: 1 ")]),s._v("\n};\nfunc();\nalert(a); "),t("span",{staticClass:"hljs-comment"},[s._v("// 输出:Uncaught ReferenceError: a is not defined")]),s._v("\n")])])]),t("h2",{attrs:{id:"变量的生存周期"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#变量的生存周期"}},[s._v("#")]),s._v(" 变量的生存周期")]),s._v(" "),t("p",[s._v("对于全局变量来说，全局变量的生存周期当然是永久的，除非我们主动销毁这个全局变量。"),t("br"),s._v("\n而对于在函数内用 var 关键字声明的局部变量来说，当退出函数时，它们都会随着函数调用的结束而被销毁。")]),s._v(" "),t("div",{staticClass:"language-javascript extra-class"},[t("pre",[t("code",{staticClass:"language-javascript"},[t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" func = "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v("("),t("span",{staticClass:"hljs-params"}),s._v(")")]),s._v("{\n  "),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" a = "),t("span",{staticClass:"hljs-number"},[s._v("1")]),s._v("; "),t("span",{staticClass:"hljs-comment"},[s._v("// 退出函数后局部变量 a 将被销毁 ")]),s._v("\n  alert(a);\n}; \nfunc();\n")])])]),t("p",[s._v("闭包可以延续变量的生存周期")]),s._v(" "),t("div",{staticClass:"language-javascript extra-class"},[t("pre",[t("code",{staticClass:"language-javascript"},[t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" func = "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v("("),t("span",{staticClass:"hljs-params"}),s._v(")")]),s._v("{ \n  "),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" a = "),t("span",{staticClass:"hljs-number"},[s._v("1")]),s._v(";\n  "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v("("),t("span",{staticClass:"hljs-params"}),s._v(")")]),s._v("{ \n    a++;\n    alert(a);\n  } \n};\n"),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" f = func(); \nf();  "),t("span",{staticClass:"hljs-comment"},[s._v("// 输出:2")]),s._v("\nf();  "),t("span",{staticClass:"hljs-comment"},[s._v("// 输出:3")]),s._v("\nf();  "),t("span",{staticClass:"hljs-comment"},[s._v("// 输出:4")]),s._v("\nf();  "),t("span",{staticClass:"hljs-comment"},[s._v("// 输出:5")]),s._v("\n")])])]),t("h2",{attrs:{id:"闭包的更多作用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#闭包的更多作用"}},[s._v("#")]),s._v(" 闭包的更多作用")]),s._v(" "),t("h3",{attrs:{id:"封装变量"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#封装变量"}},[s._v("#")]),s._v(" 封装变量")]),s._v(" "),t("p",[s._v('闭包可以帮助把一些不需要暴露在全局的变量封装成"私有变量"')]),s._v(" "),t("div",{staticClass:"language-javascript extra-class"},[t("pre",[t("code",{staticClass:"language-javascript"},[t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" mult = ("),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v("("),t("span",{staticClass:"hljs-params"}),s._v(")")]),s._v("{ \n  "),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" cache = {};\n  "),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" calculate = "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v("("),t("span",{staticClass:"hljs-params"}),s._v(")")]),s._v("{ "),t("span",{staticClass:"hljs-comment"},[s._v("// 封闭 calculate 函数")]),s._v("\n  \t"),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" a = "),t("span",{staticClass:"hljs-number"},[s._v("1")]),s._v(";\n    "),t("span",{staticClass:"hljs-keyword"},[s._v("for")]),s._v("("),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" i = "),t("span",{staticClass:"hljs-number"},[s._v("0")]),s._v(", l = "),t("span",{staticClass:"hljs-built_in"},[s._v("arguments")]),s._v(".length; i < l; i++ ){\n      a = a * "),t("span",{staticClass:"hljs-built_in"},[s._v("arguments")]),s._v("[i];\n    };\n    "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" a; \n  }\n\n  "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v("("),t("span",{staticClass:"hljs-params"}),s._v(")")]),s._v("{\n    "),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" args = "),t("span",{staticClass:"hljs-built_in"},[s._v("Array")]),s._v(".prototype.join.call("),t("span",{staticClass:"hljs-built_in"},[s._v("arguments")]),s._v(", "),t("span",{staticClass:"hljs-string"},[s._v("','")]),s._v("); \n    "),t("span",{staticClass:"hljs-keyword"},[s._v("if")]),s._v(" (args "),t("span",{staticClass:"hljs-keyword"},[s._v("in")]),s._v(" cache){\n      "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" cache[args]; \n    }\n    "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" cache[args] = calculate.apply("),t("span",{staticClass:"hljs-literal"},[s._v("null")]),s._v(", "),t("span",{staticClass:"hljs-built_in"},[s._v("arguments")]),s._v(");\n  }\n})();\nalert(mult("),t("span",{staticClass:"hljs-number"},[s._v("1")]),s._v(","),t("span",{staticClass:"hljs-number"},[s._v("2")]),s._v(","),t("span",{staticClass:"hljs-number"},[s._v("3")]),s._v(")); "),t("span",{staticClass:"hljs-comment"},[s._v("// 输出:6 ")]),s._v("\nalert(mult("),t("span",{staticClass:"hljs-number"},[s._v("1")]),s._v(","),t("span",{staticClass:"hljs-number"},[s._v("2")]),s._v(","),t("span",{staticClass:"hljs-number"},[s._v("3")]),s._v(")); "),t("span",{staticClass:"hljs-comment"},[s._v("// 输出:6 ")]),s._v("\n")])])]),t("h3",{attrs:{id:"延续局部变量的寿命"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#延续局部变量的寿命"}},[s._v("#")]),s._v(" 延续局部变量的寿命")]),s._v(" "),t("p",[s._v("函数内部的局部变量所在的环境还能被外界访问时，这个局部变量就不会被销毁")]),s._v(" "),t("h3",{attrs:{id:"闭包实现命令模式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#闭包实现命令模式"}},[s._v("#")]),s._v(" 闭包实现命令模式")]),s._v(" "),t("div",{staticClass:"language-html extra-class"},[t("pre",[t("code",{staticClass:"language-html"},[s._v(" "),t("span",{staticClass:"hljs-tag"},[s._v("<"),t("span",{staticClass:"hljs-name"},[s._v("html")]),s._v(">")]),s._v(" \n    "),t("span",{staticClass:"hljs-tag"},[s._v("<"),t("span",{staticClass:"hljs-name"},[s._v("body")]),s._v(">")]),s._v("\n      "),t("span",{staticClass:"hljs-tag"},[s._v("<"),t("span",{staticClass:"hljs-name"},[s._v("button")]),s._v(" "),t("span",{staticClass:"hljs-attr"},[s._v("id")]),s._v("="),t("span",{staticClass:"hljs-string"},[s._v('"execute"')]),s._v(">")]),s._v("点击我执行命令"),t("span",{staticClass:"hljs-tag"},[s._v("</"),t("span",{staticClass:"hljs-name"},[s._v("button")]),s._v(">")]),s._v("\n      "),t("span",{staticClass:"hljs-tag"},[s._v("<"),t("span",{staticClass:"hljs-name"},[s._v("button")]),s._v(" "),t("span",{staticClass:"hljs-attr"},[s._v("id")]),s._v("="),t("span",{staticClass:"hljs-string"},[s._v('"undo"')]),s._v(">")]),s._v("点击我执行命令"),t("span",{staticClass:"hljs-tag"},[s._v("</"),t("span",{staticClass:"hljs-name"},[s._v("button")]),s._v(">")]),s._v(" \n   \t\t"),t("span",{staticClass:"hljs-tag"},[s._v("<"),t("span",{staticClass:"hljs-name"},[s._v("script")]),s._v(">")]),t("span",{staticClass:"javascript"},[s._v("\n\t\t\t  "),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" Tv = {\n\t\t\t\t\t"),t("span",{staticClass:"hljs-attr"},[s._v("open")]),s._v(": "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v("("),t("span",{staticClass:"hljs-params"}),s._v(")")]),s._v("{\n\t\t\t\t\t\t"),t("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log("),t("span",{staticClass:"hljs-string"},[s._v("'打开电视机'")]),s._v("); \n\t\t\t\t\t},\n\t\t\t\t\t"),t("span",{staticClass:"hljs-attr"},[s._v("close")]),s._v(": "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v("("),t("span",{staticClass:"hljs-params"}),s._v(")")]),s._v("{\n\t\t\t\t\t\t"),t("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log("),t("span",{staticClass:"hljs-string"},[s._v("'关上电视机'")]),s._v(");\n\t\t\t\t\t} \n\t\t\t\t};\n\t\t\t\t"),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" createCommand = "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v("("),t("span",{staticClass:"hljs-params"},[s._v("receiver")]),s._v(")")]),s._v("{ \n\t\t\t\t\t"),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" execute = "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v("("),t("span",{staticClass:"hljs-params"}),s._v(")")]),s._v("{\n\t\t\t\t\t\t"),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" receiver.open();"),t("span",{staticClass:"hljs-comment"},[s._v("// 执行命令，打开电视机")]),s._v("\n\t\t\t\t\t}\n\t\t\t\t\t"),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" undo = "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v("("),t("span",{staticClass:"hljs-params"}),s._v(")")]),s._v("{ \n\t\t\t\t\t\t"),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" receiver.close();"),t("span",{staticClass:"hljs-comment"},[s._v("// 执行命令，关闭电视机")]),s._v("\n\t\t\t\t\t}\n\t\t\t\t\t"),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" {\n\t\t\t\t\t\t"),t("span",{staticClass:"hljs-attr"},[s._v("execute")]),s._v(": execute, \n\t\t\t\t\t\t"),t("span",{staticClass:"hljs-attr"},[s._v("undo")]),s._v(": undo\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\t"),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" setCommand = "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v("("),t("span",{staticClass:"hljs-params"},[s._v(" command ")]),s._v(")")]),s._v("{\n\t\t\t\t\t"),t("span",{staticClass:"hljs-built_in"},[s._v("document")]),s._v(".getElementById("),t("span",{staticClass:"hljs-string"},[s._v("'execute'")]),s._v(").onclick = "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v("("),t("span",{staticClass:"hljs-params"}),s._v(")")]),s._v("{\n\t\t\t\t\t\tcommand.execute(); "),t("span",{staticClass:"hljs-comment"},[s._v("// 输出:打开电视机 ")]),s._v("\n\t\t\t\t\t}\n\t\t\t\t\t"),t("span",{staticClass:"hljs-built_in"},[s._v("document")]),s._v(".getElementById("),t("span",{staticClass:"hljs-string"},[s._v("'undo'")]),s._v(").onclick = "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v("("),t("span",{staticClass:"hljs-params"}),s._v(")")]),s._v("{ \n\t\t\t\t\t\tcommand.undo(); "),t("span",{staticClass:"hljs-comment"},[s._v("// 输出:关闭电视机")]),s._v("\n\t\t\t\t\t} \n\t\t\t\t};\n\t\t\t\tsetCommand(createCommand(Tv));\n\t\t\t")]),t("span",{staticClass:"hljs-tag"},[s._v("</"),t("span",{staticClass:"hljs-name"},[s._v("script")]),s._v(">")]),s._v(" \n    "),t("span",{staticClass:"hljs-tag"},[s._v("</"),t("span",{staticClass:"hljs-name"},[s._v("body")]),s._v(">")]),s._v("\n"),t("span",{staticClass:"hljs-tag"},[s._v("</"),t("span",{staticClass:"hljs-name"},[s._v("html")]),s._v(">")]),s._v("\n")])])]),t("h3",{attrs:{id:"闭包与内存管理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#闭包与内存管理"}},[s._v("#")]),s._v(" 闭包与内存管理")]),s._v(" "),t("p",[s._v("如果两个对象之间形成了循环引用，那么这两个对象都无法被回收，但循环引用造成的内存泄露在本质上也不是闭包造成的")]),s._v(" "),t("h1",{attrs:{id:"高阶函数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#高阶函数"}},[s._v("#")]),s._v(" 高阶函数")]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),t("p",[s._v("高阶函数是指至少满足下列条件之一的函数")]),s._v(" "),t("ul",[t("li",[s._v("函数可以作为参数被传递")]),s._v(" "),t("li",[s._v("函数可以作为返回值输出")])])]),s._v(" "),t("h2",{attrs:{id:"函数作为参数传递"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#函数作为参数传递"}},[s._v("#")]),s._v(" 函数作为参数传递")]),s._v(" "),t("h3",{attrs:{id:"回调函数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#回调函数"}},[s._v("#")]),s._v(" 回调函数")]),s._v(" "),t("p",[s._v("异步请求")]),s._v(" "),t("div",{staticClass:"language-javascript extra-class"},[t("pre",[t("code",{staticClass:"language-javascript"},[t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" getUserInfo = "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v("("),t("span",{staticClass:"hljs-params"},[s._v("userId, callback")]),s._v(")")]),s._v("{\n  $.ajax("),t("span",{staticClass:"hljs-string"},[s._v("'http://xxx.com/getUserInfo?'")]),s._v(" + userId, "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v("("),t("span",{staticClass:"hljs-params"},[s._v("data")]),s._v(")")]),s._v("{\n    "),t("span",{staticClass:"hljs-keyword"},[s._v("if")]),s._v(" ("),t("span",{staticClass:"hljs-keyword"},[s._v("typeof")]),s._v(" callback === "),t("span",{staticClass:"hljs-string"},[s._v("'function'")]),s._v("){ \n      callback(data);\n    } \n  });\n}\ngetUserInfo("),t("span",{staticClass:"hljs-number"},[s._v("13157")]),s._v(", "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v("("),t("span",{staticClass:"hljs-params"},[s._v("data")]),s._v(")")]),s._v("{ \n  alert(data.userName);\n});\n")])])]),t("p",[s._v("委托")]),s._v(" "),t("div",{staticClass:"language-javascript extra-class"},[t("pre",[t("code",{staticClass:"language-javascript"},[t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" appendDiv = "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v("("),t("span",{staticClass:"hljs-params"},[s._v("callback")]),s._v(")")]),s._v("{ \n  "),t("span",{staticClass:"hljs-keyword"},[s._v("for")]),s._v(" ("),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" i = "),t("span",{staticClass:"hljs-number"},[s._v("0")]),s._v("; i < "),t("span",{staticClass:"hljs-number"},[s._v("100")]),s._v("; i++){\n    "),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" div = "),t("span",{staticClass:"hljs-built_in"},[s._v("document")]),s._v(".createElement("),t("span",{staticClass:"hljs-string"},[s._v("'div'")]),s._v("); div.innerHTML = i;             \n    "),t("span",{staticClass:"hljs-built_in"},[s._v("document")]),s._v(".body.appendChild( div );\n    "),t("span",{staticClass:"hljs-keyword"},[s._v("if")]),s._v(" ("),t("span",{staticClass:"hljs-keyword"},[s._v("typeof")]),s._v(" callback === "),t("span",{staticClass:"hljs-string"},[s._v("'function'")]),s._v("){\n      callback( div ); \n    } \n  };\n};\nappendDiv("),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v("("),t("span",{staticClass:"hljs-params"},[s._v(" node ")]),s._v(")")]),s._v("{ \n  node.style.display = "),t("span",{staticClass:"hljs-string"},[s._v("'none'")]),s._v(";\n});\n")])])]),t("p",[s._v("如果上面的代码直接在创建好div后直接隐藏，函数将难以复用。使用上面的写法，隐藏节点的请求实际上是由客户发起的，但是客服并不知道节点什么时候会创建好，所以把隐藏节点的逻辑放在回调函数中，“委托”给appendDiv方法。")]),s._v(" "),t("h3",{attrs:{id:"array-prototype-sort"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#array-prototype-sort"}},[s._v("#")]),s._v(" Array.prototype.sort")]),s._v(" "),t("div",{staticClass:"language-javascript extra-class"},[t("pre",[t("code",{staticClass:"language-javascript"},[s._v("["),t("span",{staticClass:"hljs-number"},[s._v("1")]),s._v(", "),t("span",{staticClass:"hljs-number"},[s._v("4")]),s._v(", "),t("span",{staticClass:"hljs-number"},[s._v("3")]),s._v("].sort("),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" ("),t("span",{staticClass:"hljs-params"},[s._v("a, b")]),s._v(") ")]),s._v("{\n\t"),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" a - b\n})\n"),t("span",{staticClass:"hljs-comment"},[s._v("// 输出: [1, 3, 4]")]),s._v("\n")])])]),t("h2",{attrs:{id:"函数作为返回值输出"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#函数作为返回值输出"}},[s._v("#")]),s._v(" 函数作为返回值输出")]),s._v(" "),t("h3",{attrs:{id:"判断数据的类型"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#判断数据的类型"}},[s._v("#")]),s._v(" 判断数据的类型")]),s._v(" "),t("div",{staticClass:"language-javascript extra-class"},[t("pre",[t("code",{staticClass:"language-javascript"},[t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" Type = {};\n"),t("span",{staticClass:"hljs-keyword"},[s._v("for")]),s._v(" ("),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" i = "),t("span",{staticClass:"hljs-number"},[s._v("0")]),s._v(", type; type = ["),t("span",{staticClass:"hljs-string"},[s._v("'String'")]),s._v(", "),t("span",{staticClass:"hljs-string"},[s._v("'Array'")]),s._v(", "),t("span",{staticClass:"hljs-string"},[s._v("'Number'")]),s._v("][i++];){\n  ("),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v("("),t("span",{staticClass:"hljs-params"},[s._v("type")]),s._v(")")]),s._v("{\n    Type["),t("span",{staticClass:"hljs-string"},[s._v("'is'")]),s._v(" + type] = "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v("("),t("span",{staticClass:"hljs-params"},[s._v("obj")]),s._v(")")]),s._v("{\n      "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),t("span",{staticClass:"hljs-built_in"},[s._v("Object")]),s._v(".prototype.toString.call(obj) === "),t("span",{staticClass:"hljs-string"},[s._v("'[object '")]),s._v("+ type +"),t("span",{staticClass:"hljs-string"},[s._v("']'")]),s._v(";\n    }\n  })(type)\n};\nType.isArray([]);     "),t("span",{staticClass:"hljs-comment"},[s._v("// 输出:true")]),s._v("\nType.isString("),t("span",{staticClass:"hljs-string"},[s._v('"str"')]),s._v(");    "),t("span",{staticClass:"hljs-comment"},[s._v("// 输出:true")]),s._v("\n")])])]),t("h3",{attrs:{id:"getsingle"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#getsingle"}},[s._v("#")]),s._v(" getSingle")]),s._v(" "),t("p",[s._v("下面是一个单例模式的例子")]),s._v(" "),t("div",{staticClass:"language-javascript extra-class"},[t("pre",[t("code",{staticClass:"language-javascript"},[t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" getSingle = "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" ("),t("span",{staticClass:"hljs-params"},[s._v("fn")]),s._v(") ")]),s._v("{\n  "),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" ret;\n  "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" ("),t("span",{staticClass:"hljs-params"}),s._v(") ")]),s._v("{\n    "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" ret || (ret = fn.apply("),t("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v(", "),t("span",{staticClass:"hljs-built_in"},[s._v("arguments")]),s._v("));\n  };\n};\n"),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" getScript = getSingle("),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v("("),t("span",{staticClass:"hljs-params"}),s._v(")")]),s._v("{\n  "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),t("span",{staticClass:"hljs-built_in"},[s._v("document")]),s._v(".createElement( "),t("span",{staticClass:"hljs-string"},[s._v("'script'")]),s._v(" );\n});\n"),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" script1 = getScript(); \n"),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" script2 = getScript();\nalert ( script1 === script2 );  "),t("span",{staticClass:"hljs-comment"},[s._v("// 输出:true")]),s._v("\n")])])]),t("h2",{attrs:{id:"高阶函数实现aop"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#高阶函数实现aop"}},[s._v("#")]),s._v(" 高阶函数实现AOP")]),s._v(" "),t("p",[s._v("AOP(面向切面编程)的主要作用是把一些跟核心业务逻辑模块无关的功能抽离出来，这些 跟业务逻辑无关的功能通常包括日志统计、安全控制、异常处理等。把这些功能抽离出来之后，再通过“动态织入”的方式掺入业务逻辑模块中。")]),s._v(" "),t("div",{staticClass:"language-javascript extra-class"},[t("pre",[t("code",{staticClass:"language-javascript"},[t("span",{staticClass:"hljs-built_in"},[s._v("Function")]),s._v(".prototype.before = "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v("("),t("span",{staticClass:"hljs-params"},[s._v(" beforefn ")]),s._v(")")]),s._v("{\n  "),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" __self = "),t("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v("; "),t("span",{staticClass:"hljs-comment"},[s._v("// 保存原函数的引用")]),s._v("\n  "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v("("),t("span",{staticClass:"hljs-params"}),s._v(")")]),s._v("{ "),t("span",{staticClass:"hljs-comment"},[s._v('// 返回包含了原函数和新函数的"代理"函数')]),s._v("\n    beforefn.apply("),t("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v(", "),t("span",{staticClass:"hljs-built_in"},[s._v("arguments")]),s._v("); \n    "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" __self.apply("),t("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v(", "),t("span",{staticClass:"hljs-built_in"},[s._v("arguments")]),s._v(");\n  }\n};\n"),t("span",{staticClass:"hljs-built_in"},[s._v("Function")]),s._v(".prototype.after = "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v("("),t("span",{staticClass:"hljs-params"},[s._v(" afterfn ")]),s._v(")")]),s._v("{\n  "),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" __self = "),t("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v(";\n  "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v("("),t("span",{staticClass:"hljs-params"}),s._v(")")]),s._v("{\n  \t"),t("span",{staticClass:"hljs-comment"},[s._v("// 执行新函数，修正 this // 执行原函数")]),s._v("\n  \t"),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" ret = __self.apply( "),t("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v(", "),t("span",{staticClass:"hljs-built_in"},[s._v("arguments")]),s._v(" );        \n    afterfn.apply( "),t("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v(", "),t("span",{staticClass:"hljs-built_in"},[s._v("arguments")]),s._v(" );\n    "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" ret;  \n  } \n};\n"),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" func = "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v("("),t("span",{staticClass:"hljs-params"}),s._v(")")]),s._v("{ \n  "),t("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log("),t("span",{staticClass:"hljs-number"},[s._v("2")]),s._v(");\n};\nfunc = func.before("),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v("("),t("span",{staticClass:"hljs-params"}),s._v(")")]),s._v("{ \n  "),t("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log("),t("span",{staticClass:"hljs-number"},[s._v("1")]),s._v(");\n}).after("),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v("("),t("span",{staticClass:"hljs-params"}),s._v(")")]),s._v("{ \n  "),t("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log("),t("span",{staticClass:"hljs-number"},[s._v("3")]),s._v(");\n});\nfunc();    "),t("span",{staticClass:"hljs-comment"},[s._v("//  1  2  3")]),s._v("\n")])])]),t("h2",{attrs:{id:"高阶函数的其他应用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#高阶函数的其他应用"}},[s._v("#")]),s._v(" 高阶函数的其他应用")]),s._v(" "),t("h3",{attrs:{id:"currying"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#currying"}},[s._v("#")]),s._v(" currying")]),s._v(" "),t("p",[s._v("currying 又称部分求值。一个 currying 的函数首先会接受一些参数，接受了这些参数之后， 该函数并不会立即求值，而是继续返回另外一个函数，刚才传入的参数在函数形成的闭包中被保 存起来。待到函数被真正需要求值的时候，之前传入的所有参数都会被一次性用于求值。")]),s._v(" "),t("div",{staticClass:"language-javascript extra-class"},[t("pre",[t("code",{staticClass:"language-javascript"},[t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" currying = "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v("("),t("span",{staticClass:"hljs-params"},[s._v("fn")]),s._v(")")]),s._v("{ \n  "),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" args = [];\n  "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v("("),t("span",{staticClass:"hljs-params"}),s._v(")")]),s._v("{\n    "),t("span",{staticClass:"hljs-keyword"},[s._v("if")]),s._v(" ("),t("span",{staticClass:"hljs-built_in"},[s._v("arguments")]),s._v(".length === "),t("span",{staticClass:"hljs-number"},[s._v("0")]),s._v("){\n      "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" fn.apply("),t("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v(", args); \n    }"),t("span",{staticClass:"hljs-keyword"},[s._v("else")]),s._v("{\n      [].push.apply(args, "),t("span",{staticClass:"hljs-built_in"},[s._v("arguments")]),s._v(");\n      "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),t("span",{staticClass:"hljs-built_in"},[s._v("arguments")]),s._v(".callee; \n    }\n  } \n};\n"),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" cost = ("),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v("("),t("span",{staticClass:"hljs-params"}),s._v(")")]),s._v("{ \n  "),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" money = "),t("span",{staticClass:"hljs-number"},[s._v("0")]),s._v(";\n  "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v("("),t("span",{staticClass:"hljs-params"}),s._v(")")]),s._v("{\n    "),t("span",{staticClass:"hljs-keyword"},[s._v("for")]),s._v(" ( "),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" i = "),t("span",{staticClass:"hljs-number"},[s._v("0")]),s._v(", l = "),t("span",{staticClass:"hljs-built_in"},[s._v("arguments")]),s._v(".length; i < l; i++ ){\n      money += "),t("span",{staticClass:"hljs-built_in"},[s._v("arguments")]),s._v("[ i ]; \n    }\n    "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" money; \n  }\n})();\n"),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" cost = currying( cost );  "),t("span",{staticClass:"hljs-comment"},[s._v("// 转化成 currying 函数")]),s._v("\ncost("),t("span",{staticClass:"hljs-number"},[s._v("100")]),s._v("); "),t("span",{staticClass:"hljs-comment"},[s._v("// 未真正求值")]),s._v("\ncost("),t("span",{staticClass:"hljs-number"},[s._v("200")]),s._v("); "),t("span",{staticClass:"hljs-comment"},[s._v("// 未真正求值")]),s._v("\ncost("),t("span",{staticClass:"hljs-number"},[s._v("300")]),s._v(");"),t("span",{staticClass:"hljs-comment"},[s._v("// 未真正求值 ")]),s._v("\nalert(cost()); "),t("span",{staticClass:"hljs-comment"},[s._v("// 求值并输出:600")]),s._v("\n")])])]),t("h3",{attrs:{id:"uncurrying"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#uncurrying"}},[s._v("#")]),s._v(" uncurrying")]),s._v(" "),t("div",{staticClass:"language-javascript extra-class"},[t("pre",[t("code",{staticClass:"language-javascript"},[t("span",{staticClass:"hljs-built_in"},[s._v("Function")]),s._v(".prototype.uncurrying = "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" ("),t("span",{staticClass:"hljs-params"}),s._v(") ")]),s._v("{  \n  "),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" self = "),t("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v("; "),t("span",{staticClass:"hljs-comment"},[s._v("// self 此时是 Array.prototype.push")]),s._v("\n  "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v("("),t("span",{staticClass:"hljs-params"}),s._v(") ")]),s._v("{\n\t\t"),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" obj = "),t("span",{staticClass:"hljs-built_in"},[s._v("Array")]),s._v(".prototype.shift.call("),t("span",{staticClass:"hljs-built_in"},[s._v("arguments")]),s._v(");\n\t\t"),t("span",{staticClass:"hljs-comment"},[s._v("// obj是{")]),s._v("\n\t\t"),t("span",{staticClass:"hljs-comment"},[s._v('//\t"length": 1,')]),s._v("\n\t\t"),t("span",{staticClass:"hljs-comment"},[s._v('//\t"0": 1 }')]),s._v("\n\t\t"),t("span",{staticClass:"hljs-comment"},[s._v("// arguments对象的第一个元素被截去，剩下[2]")]),s._v("\n\t\t"),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" self.apply(obj, "),t("span",{staticClass:"hljs-built_in"},[s._v("arguments")]),s._v(")\n\t\t"),t("span",{staticClass:"hljs-comment"},[s._v("// 相当于 Array.prototype.push.apply(obj, 2)};")]),s._v("\n  };\n};\n"),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" push = "),t("span",{staticClass:"hljs-built_in"},[s._v("Array")]),s._v(".prototype.push.uncurrying(); \n"),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" obj = {\n  "),t("span",{staticClass:"hljs-string"},[s._v('"length"')]),s._v(": "),t("span",{staticClass:"hljs-number"},[s._v("1")]),s._v(",\n  "),t("span",{staticClass:"hljs-string"},[s._v('"0"')]),s._v(": "),t("span",{staticClass:"hljs-number"},[s._v("1")]),s._v(" \n};\npush(obj, "),t("span",{staticClass:"hljs-number"},[s._v("2")]),s._v("); \n"),t("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log(obj);"),t("span",{staticClass:"hljs-comment"},[s._v("// 输出:{0: 1, 1: 2, length: 2}")]),s._v("\n")])])]),t("h3",{attrs:{id:"函数节流"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#函数节流"}},[s._v("#")]),s._v(" 函数节流")]),s._v(" "),t("p",[s._v("将即将被执行的函数用 setTimeout 延迟一段时间执行。如果该次延迟执行还没有完成，则忽略接下来调用该函数的请求")]),s._v(" "),t("div",{staticClass:"language-javascript extra-class"},[t("pre",[t("code",{staticClass:"language-javascript"},[t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" throttle = "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" ("),t("span",{staticClass:"hljs-params"},[s._v("fn, interval")]),s._v(") ")]),s._v("{\n  "),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" __self = fn, "),t("span",{staticClass:"hljs-comment"},[s._v("// 保存需要被延迟执行的函数引用 timer, // 定时器")]),s._v("\n  firstTime = "),t("span",{staticClass:"hljs-literal"},[s._v("true")]),s._v("; "),t("span",{staticClass:"hljs-comment"},[s._v("// 是否是第一次调用")]),s._v("\n  "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" ("),t("span",{staticClass:"hljs-params"}),s._v(") ")]),s._v("{\n    "),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" args = "),t("span",{staticClass:"hljs-built_in"},[s._v("arguments")]),s._v(",\n    __me = "),t("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v(";\n    "),t("span",{staticClass:"hljs-keyword"},[s._v("if")]),s._v(" (firstTime) { "),t("span",{staticClass:"hljs-comment"},[s._v("// 如果是第一次调用，不需延迟执行 ")]),s._v("\n      __self.apply(__me, args);\n      "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" firstTime = "),t("span",{staticClass:"hljs-literal"},[s._v("false")]),s._v(";\n    }\n    "),t("span",{staticClass:"hljs-keyword"},[s._v("if")]),s._v(" (timer) { "),t("span",{staticClass:"hljs-comment"},[s._v("// 如果定时器还在，说明前一次延迟执行还没有完成 ")]),s._v("\n      "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),t("span",{staticClass:"hljs-literal"},[s._v("false")]),s._v(";  \n    }\n    timer = setTimeout("),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" ("),t("span",{staticClass:"hljs-params"}),s._v(") ")]),s._v("{ "),t("span",{staticClass:"hljs-comment"},[s._v("// 延迟一段时间执行           ")]),s._v("\n      clearTimeout(timer);\n      timer = "),t("span",{staticClass:"hljs-literal"},[s._v("null")]),s._v(";\n      __self.apply(__me, args);\n    }, interval || "),t("span",{staticClass:"hljs-number"},[s._v("500")]),s._v(" ); \n  };\n};\n"),t("span",{staticClass:"hljs-built_in"},[s._v("window")]),s._v(".onresize = throttle("),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v("("),t("span",{staticClass:"hljs-params"}),s._v(")")]),s._v("{ \n  "),t("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log( "),t("span",{staticClass:"hljs-number"},[s._v("1")]),s._v(" );\n}, "),t("span",{staticClass:"hljs-number"},[s._v("500")]),s._v(" );\n")])])])])}),[],!1,null,null,null);a.default=l.exports}}]);